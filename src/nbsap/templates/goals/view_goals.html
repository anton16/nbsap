{% extends 'layout.html' %}
{% block content %}

{% if messages %}
<div class="messages alert alert-succes">
{% for message in messages %}
    <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
{% endfor %}
</div>
{% endif %}

{% load markup %}

{% include 'admin_nav_tabs.html' %}

<h1 class="small">{{ goal.title }}</h1>

<div class="btn-toolbar">
  <div class="btn-group">

    <a class="btn btn-success btn-small"
       href=""><i class="icon-white icon-arrow-left"></i> Back</a>

    <a class="btn edit btn-small"
       href="">Edit</a>

    <a class="btn btn-danger edit btn-small">
       <i class="icon-white icon-trash"></i> Delete</a>
  </div>
</div>

<div class="admin-goal-description">
  {{ goal.description|safe }}
</div>


{% endblock %}

{% block scripts %}
<script>
  $(function () {
    $('.messages').delay(1000).fadeOut();
  });

  $(".btn-danger").on("click", function (e) {
    e.preventDefault();
    if(confirm('Are you sure you want to delete this goal?')) {
      $.ajax({
        "url": $(this).attr("href"),
        "type": "DELETE",
        "success": function (data) {
        window.location = "{% url 'delete_goal' code=goal.code %}";
        }
      });
    }
  });

</script>
{% endblock scripts %}
